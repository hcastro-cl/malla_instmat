<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div class="controls">
        <select id="node-color-select" style="display:none;"></select>
    </div>
    <script>
        const courseLabels = []; // assuming this is defined somewhere

        // 20 visually distinct colors
        const nodeColors = [
          "#e6194b", "#3cb44b", "#ffe119", "#4363d8", "#f58231",
          "#911eb4", "#46f0f0", "#f032e6", "#bcf60c", "#fabebe",
          "#008080", "#e6beff", "#9a6324", "#fffac8", "#800000",
          "#aaffc3", "#808000", "#ffd8b1", "#000075", "#808080"
        ];

        // Populate color select
        const colorSelect = document.getElementById('node-color-select');
        nodeColors.forEach(color => {
          const option = document.createElement('option');
          option.value = color;
          option.textContent = color;
          option.style.backgroundColor = color;
          colorSelect.appendChild(option);
        });

        function showColorPicker() {
          if (!cy) return;
          const selected = cy.$('node:selected');
          if (selected.length === 0) {
            alert('Selecciona un nodo para cambiar su color.');
            return;
          }
          // Show color select
          colorSelect.style.display = 'inline-block';
          // Set default value to the color of the first selected node
          colorSelect.value = selected.data('color') || nodeColors[0];
          colorSelect.onchange = function() {
            const color = colorSelect.value;
            selected.forEach(node => node.data('color', color));
            colorSelect.style.display = 'none';
          };
        }

        // Optionally, hide the select when clicking away
        colorSelect.addEventListener('blur', function() {
          colorSelect.style.display = 'none';
        });
    </script>
</body>
</html>